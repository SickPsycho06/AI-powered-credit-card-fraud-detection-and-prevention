<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"="width=device-width, initial-scale=1.0">
    <title>AI-Powered Credit Card Fraud Detection</title>
    <link rel="stylesheet" href="styles/style.css">
    <style>
        body {
            padding-top: 60px; /* Adjust based on the height of the navigation bar */
        }
        .logo, .nav-links li {
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0s ease, transform 0s cubic-bezier(0.4,0,0.2,1);
        }
        .fade-in {
            opacity: 1 !important;
            transform: translateY(0) !important;
        }
        .nav-links li {
            transition-delay: 0.2s;
        }
        .dashboard-analytics { margin: 2em 0; }
        .dashboard-row { display: flex; gap: 2em; flex-wrap: wrap; }
        .dashboard-card {
            background: #181f2a;
            border-radius: 16px;
            box-shadow: 0 2px 12px rgba(44,62,80,0.08);
            padding: 1.5em;
            flex: 1;
            min-width: 280px;
            color: #fff;
        }
        .transactions-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1em;
            background: #232c3b;
            color: #fff;
            border-radius: 8px;
            overflow: hidden;
        }
        .transactions-table th, .transactions-table td {
            padding: 0.7em 1em;
            text-align: left;
        }
        .transactions-table th {
            background: #1a2233;
        }
        .transactions-table tr:nth-child(even) {
            background: #202a3a;
        }
        .approve-btn, .block-btn {
            border: none;
            border-radius: 4px;
            padding: 0.4em 1em;
            margin: 0 0.2em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s;
        }
        .approve-btn { background: #27ae60; color: #fff; }
        .block-btn { background: #e74c3c; color: #fff; }
        .approve-btn:hover { background: #219150; }
        .block-btn:hover { background: #c0392b; }
    </style>
</head>
<body>
    <header>
        <img src="assets/logo.svg" alt="Logo" class="logo">
        <nav>
            <ul class="nav-links">
                <li><a href="#home-section">Home</a></li>
                <li><a href="#how-it-works-section">How It Works</a></li>
                <li><a href="#features-section">Features</a></li>
                <li><a href="#case-studies-section">Case Studies</a></li>
                <li><a href="#faqs-section">FAQs</a></li>
                <li><a href="#blog-section">Blog</a></li>
                <li><a href="#contact-us-section">Contact Us</a></li>
                <li><a href="#privacy-policy-section">Privacy Policy</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section id="home-section" class="page-section">
            <h2>Welcome to AI-Powered Fraud Detection</h2>
            <p>Your security is our priority. Our AI-driven fraud detection system safeguards your transactions with advanced technology, ensuring a seamless and secure payment experience.</p>
            
            <div class="features-highlight">
                <h3>Why Choose AI-Powered Protection?</h3>
                <ul>
                    <li><strong>Real-Time Monitoring:</strong> Detect and prevent fraudulent transactions instantly.</li>
                    <li><strong>Anomaly Detection:</strong> Identify unusual spending patterns to stop fraud before it happens.</li>
                    <li><strong>Predictive Analytics:</strong> AI-driven insights help anticipate threats and reduce risks.</li>
                </ul>
            </div>

            <div class="why-ai-matters">
                <h3>Why AI Fraud Detection Matters</h3>
                <p>Financial fraud is on the rise, and traditional security measures struggle to keep up with evolving threats. AI fraud detection harnesses machine learning and predictive analytics to analyze, detect, and prevent fraud in real time‚Äîoffering unmatched accuracy and protection.</p>
                <h4>Key Benefits of AI Fraud Detection</h4>
                <ul>
                    <li>‚úÖ <strong>Instant Fraud Prevention:</strong> AI monitors transactions continuously to stop fraudulent activity before damage occurs.</li>
                    <li>‚úÖ <strong>Advanced Anomaly Detection:</strong> AI identifies suspicious patterns that indicate fraud‚Äîeven in complex scenarios.</li>
                    <li>‚úÖ <strong>Adaptive Learning:</strong> AI evolves with fraud techniques, staying ahead of cybercriminals.</li>
                    <li>‚úÖ <strong>Reduced False Positives:</strong> AI refines fraud detection models to prevent legitimate transactions from being mistakenly blocked.</li>
                    <li>‚úÖ <strong>Seamless Payment Security:</strong> AI integrates with banking systems to safeguard financial transactions.</li>
                    <li>‚úÖ <strong>Multi-Layered Protection:</strong> AI uses multiple verification layers, ensuring strong authentication against fraudsters.</li>
                </ul>
            </div>
        </section>  
        <section id="how-it-works-section" class="page-section">
            <h2>How It Works</h2>
            <div class="how-it-works-steps">
                <div class="step">
                    <h3>üöÄ Step 1: Real-Time Monitoring</h3>
                    <p>Our AI instantly analyzes transactions, identifying suspicious patterns and preventing fraud before it happens.</p>
                </div>
                <div class="step">
                    <h3>üîé Step 2: Anomaly Detection & Risk Scoring</h3>
                    <p>AI compares current transactions with past data to flag irregularities. Each transaction gets a risk score based on potential fraud indicators.</p>
                </div>
                <div class="step">
                    <h3>üîÆ Step 3: Predictive Fraud Prevention</h3>
                    <p>AI continuously learns from previous fraud attempts, enhancing detection accuracy and staying ahead of evolving threats.</p>
                </div>
                <div class="step">
                    <h3>üõ°Ô∏è Step 4: Multi-Layered Authentication</h3>
                    <p>High-risk transactions undergo extra security checks like biometric verification and multi-factor authentication (MFA).</p>
                </div>
                <div class="step">
                    <h3>‚ö° Step 5: Instant Fraud Action</h3>
                    <p>
                        ‚úîÔ∏è <strong>Approved:</strong> Secure transactions proceed smoothly.<br>
                        üö´ <strong>Blocked:</strong> Fraudulent attempts are instantly stopped.<br>
                        ‚ö†Ô∏è <strong>Flagged for Review:</strong> Suspicious transactions are flagged for manual review.
                    </p>
                </div>
            </div>
        </section>
        <section id="features-section" class="page-section">
            <h2>Features</h2>
            <ul>
                <li>Anomaly detection</li>
                <li>Predictive analytics</li>
            </ul>
            <section id="input-section">
                <h3>Transaction Details</h3>
                <form id="transaction-form">
                    <label for="card-number">Card Number:</label>
                    <input 
                        type="text" 
                        id="card-number" 
                        maxlength="19" 
                        pattern="\d{4}-\d{4}-\d{4}-\d{4}" 
                        placeholder="1234-5678-9012-3456" 
                        required 
                        autocomplete="off"
                        style="letter-spacing:2px;"
                    >
                    
                    <label for="amount">Transaction Amount:</label>
                    <input type="number" id="amount" required>
                    
                    <label for="merchant">Merchant:</label>
                    <input type="text" id="merchant" required>

                    <label for="expiry-date">Card Expiry Date (MM/YY):</label>
                    <input type="text" id="expiry-date" placeholder="MM/YY" required>
                    
                    <button type="submit">Check Fraud Risk</button>
                </form>
            </section>
            <section id="result-section">
                <h3>Fraud Detection Result</h3>
                <div id="result">
                    <p>Submit a transaction to see the fraud detection results.</p>
                </div>
            </section>

            <div class="dashboard-analytics">
                <div class="dashboard-row">
                    <!-- 24-Hour Fraud Detection Trends -->
                    <div class="dashboard-card">
                        <h3>24-Hour Fraud Detection Trends</h3>
                        <canvas id="fraudTrendsChart" height="120"></canvas>
                    </div>
                    <!-- Fraud Distribution -->
                    <div class="dashboard-card">
                        <h3>Fraud Type Distribution</h3>
                        <canvas id="fraudDistributionChart" height="120"></canvas>
                    </div>
                    <!-- AI Risk Gauge -->
                    <div class="dashboard-card" style="min-width:260px; padding-top: 1em; padding-bottom: 1em;">
                        <h3 style="margin-bottom: 0.5em; margin-top: 0.2em;">AI Fraud Detection Engine</h3>
                        <div style="display:flex;align-items:center;justify-content:center; margin-bottom:0.2em; margin-top:0;">
                            <canvas id="riskGaugeChart" height="70" width="140"></canvas>
                        </div>
                        <div id="riskLevelLabel" style="text-align:center;font-weight:bold;margin-top:2px;font-size:1.1em;">Risk: Medium</div>
                        <div style="margin-top:6px;text-align:center;">
                            <span style="color:#27ae60;font-weight:bold;">Low</span>
                            <span style="color:#f1c40f;font-weight:bold;margin:0 12px;">Medium</span>
                            <span style="color:#e67e22;font-weight:bold;">High</span>
                        </div>
                        <div style="margin-top:6px;font-size:0.95em;color:#bbb;text-align:center;">
                            <span>AI analyzes transaction patterns, user behavior, and risk factors to provide a real-time fraud risk score.</span>
                        </div>
                    </div>
                </div>
                <!-- Transition Map (Table of Transactions) -->
                <div class="dashboard-row">
                    <div class="dashboard-card" style="flex:2;">
                        <h3>Recent & Similar Transactions</h3>
                        <table class="transactions-table">
                            <thead>
                                <tr>
                                    <th>Merchant</th>
                                    <th>Amount</th>
                                    <th>Time</th>
                                    <th>Risk</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="transactions-list">
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>
        <section id="history-section">
            <h3>Transaction History</h3>
            <table id="transaction-history">
                <thead>
                    <tr>
                        <th>Transaction ID</th>
                        <th>Card Number</th>
                        <th>Amount</th>
                        <th>Merchant</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="history-body">
                    <!-- Transaction history will be dynamically added here -->
                </tbody>
            </table>
            <button id="download-history" style="margin-top:1em;">Download History (CSV)</button>
        </section>
        <section id="case-studies-section" class="page-section">
            <h2>Case Studies</h2>
            <div class="case-study">
                <h3>üìå Case Study 1: Banking Sector ‚Äì Preventing Unauthorized Transactions</h3>
                <p><strong>Client:</strong> Leading Global Bank</p>
                <p><strong>Challenge:</strong> A surge in fraudulent transactions caused financial losses and customer distrust.</p>
                <p><strong>Solution:</strong> Our AI fraud detection system analyzed transaction patterns, identifying anomalies in real time.</p>
                <p><strong>Results:</strong></p>
                <ul>
                    <li>‚úîÔ∏è Reduced fraud cases by 87% in six months.</li>
                    <li>‚úîÔ∏è Cut chargebacks by 60%, improving banking security.</li>
                    <li>‚úîÔ∏è Enhanced customer trust, leading to higher transaction approval rates.</li>
                </ul>
            </div>
            <div class="case-study">
                <h3>üìå Case Study 2: E-Commerce Platform ‚Äì Stopping Payment Fraud</h3>
                <p><strong>Client:</strong> Online Marketplace with Over 2M Users</p>
                <p><strong>Challenge:</strong> Fraudulent purchases and stolen credit card usage caused financial damage.</p>
                <p><strong>Solution:</strong> AI-driven fraud prevention analyzed user behavior, flagging suspicious activities before payment approval.</p>
                <p><strong>Results:</strong></p>
                <ul>
                    <li>‚úîÔ∏è Blocked 95% of fraudulent transactions before checkout.</li>
                    <li>‚úîÔ∏è Saved over $2M in revenue loss from chargebacks.</li>
                    <li>‚úîÔ∏è Improved transaction security, leading to fewer disputes.</li>
                </ul>
            </div>
        </section>
        <section id="faqs-section" class="page-section">
            <h2>FAQs</h2>
            <div class="faq-category">
                <h3>üîç General Questions</h3>
                <ul>
                    <li><strong>1. What is AI-powered fraud detection?</strong> AI fraud detection uses advanced machine learning to analyze transactions, identify suspicious patterns, and prevent fraudulent activities before they occur.</li>
                    <li><strong>2. How does the system detect fraud?</strong> Our AI monitors transactions in real time, applies anomaly detection, and assigns risk scores to flag potential fraud, ensuring secure transactions.</li>
                    <li><strong>3. Is AI fraud detection accurate?</strong> Yes! AI continuously learns from fraud attempts, improving accuracy while reducing false positives.</li>
                </ul>
            </div>
            <div class="faq-category">
                <h3>üîê Security & Privacy</h3>
                <ul>
                    <li><strong>4. Is my transaction data secure?</strong> Absolutely! We use end-to-end encryption to protect all transaction details and personal data.</li>
                    <li><strong>5. How do you handle false fraud alerts?</strong> Our AI refines its detection models to minimize false positives. If a transaction is mistakenly blocked, users can verify their identity for approval.</li>
                    <li><strong>6. Does AI prevent identity theft?</strong> Yes! AI fraud detection identifies unusual login attempts and unauthorized access, preventing identity fraud before damage occurs.</li>
                </ul>
            </div>
            <div class="faq-category">
                <h3>üè¶ Usage & Compatibility</h3>
                <ul>
                    <li><strong>7. Can businesses integrate this system with their payment gateways?</strong> Yes, our fraud detection technology seamlessly integrates with banks, e-commerce platforms, and digital payment systems.</li>
                    <li><strong>8. Does AI fraud detection work for small businesses?</strong> Definitely! AI fraud detection is scalable and adapts to businesses of all sizes.</li>
                    <li><strong>9. Can users access fraud reports?</strong> Yes, users can view detailed fraud detection reports in their dashboard, including risk scores and flagged transactions.</li>
                </ul>
            </div>
            <div class="faq-category">
                <h3>‚öôÔ∏è Technical Support</h3>
                <ul>
                    <li><strong>10. What happens if my transaction is flagged?</strong> You‚Äôll receive a security notification with verification steps to confirm your identity and approve the transaction.</li>
                    <li><strong>11. How can I contact support?</strong> You can reach our customer support team via email or phone for real-time assistance.</li>
                    <li><strong>12. Is AI fraud detection available worldwide?</strong> Yes, our system operates globally and adapts to different fraud risk levels across regions.</li>
                </ul>
            </div>
            <p>üîó <a href="#contact-us-section">Still Have Questions? Contact Us</a> | <a href="#blog-section">Learn More</a></p>
            <p>üîí Stay Protected ‚Äì AI Safeguards Your Transactions!</p>
        </section>
        <section id="blog-section" class="page-section">
            <h2>Blog</h2>
            <div class="blog-category">
                <h3>üì¢ Latest Articles</h3>
                <ul>
                    <li><strong>üîé How AI is Transforming Fraud Detection:</strong> Learn how AI algorithms analyze transactions to prevent financial fraud.</li>
                    <li><strong>üõ°Ô∏è Top 5 Ways to Protect Your Transactions:</strong> Essential fraud prevention techniques every business and consumer should know.</li>
                    <li><strong>üöÄ Real-Life Fraud Cases & How AI Prevented Them:</strong> Success stories from businesses that saved millions using AI-powered fraud detection.</li>
                </ul>
            </div>
            <div class="blog-category">
                <h3>üè¶ Industry Trends & Updates</h3>
                <ul>
                    <li><strong>üìñ Emerging Fraud Threats in 2025:</strong> Latest fraud techniques and prevention strategies.</li>
                    <li><strong>üí° AI vs. Traditional Fraud Detection:</strong> Why AI security outperforms outdated fraud prevention methods.</li>
                    <li><strong>‚ö° The Role of Predictive Analytics in Stopping Fraud:</strong> How AI forecasts fraud trends before they occur.</li>
                </ul>
            </div>
            <div class="blog-category">
                <h3>üéØ Security Tips & Best Practices</h3>
                <ul>
                    <li><strong>‚úîÔ∏è How to Spot Suspicious Transactions in Real-Time:</strong> Practical tips for identifying fraudulent activities.</li>
                    <li><strong>‚úîÔ∏è AI-Driven Risk Scoring:</strong> What it means for fraud prevention.</li>
                    <li><strong>‚úîÔ∏è Cybersecurity Essentials for Businesses & Individuals:</strong> Key practices to stay protected online.</li>
                </ul>
            </div>
            <p>üîó <a href="#contact-us-section">Stay Protected! Subscribe for Updates</a> | <a href="#blog-section">Explore More Articles</a></p>
        </section>
        <section id="contact-us-section" class="page-section">
            <h2>Contact Us</h2>
            <div class="contact-details">
                <h3>Get in Touch with Our AI Fraud Detection Team</h3>
                <ul>
                    <li>üë§ <strong>Priskilla S</strong> ‚Äì Project Coordinator  </li>
                    <li>üë§ <strong>Deno Crispin C</strong> ‚Äì Developer & Backend Specialist</li>
                    <li>üë§ <strong>Kahled M</strong> ‚Äì Designer & Frontend Developer</li>
                </ul>
            </div>
            <div class="project-overview">
                <h3>üè¢ Project Overview</h3>
                <p>This project, developed by three dedicated students, focuses on AI-powered fraud detection for secure transactions and financial protection.</p>
                <ul>
                    <li>üìå <strong>University Name:</strong> Christ the King Engineering College</li>
                    <li>üìå <strong>Department:</strong>Artificial Intelligence and Data Science</li>
                </ul>
            </div>
            <div class="technical-support">
                <h3>üõ†Ô∏è Technical Support & Collaboration</h3>
                <p>If you're interested in the technical implementation or collaboration, feel free to contact our development team.</p>
                <ul>
                    <li>üîπ <strong>GitHub Repository:</strong> <a href="https://github.com/SickPsycho06/AI-powered-credit-card-fraud-detection-and-prevention.git" target="_blank">[Link to Project Repository]</a></li>
                </ul>
            </div>
        </section>
        <section id="privacy-policy-section" class="page-section">
            <h2>Privacy Policy & Terms</h2>
            <div class="privacy-policy">
                <h3>üîê Privacy Policy</h3>
                <p>Your privacy is our priority. This policy outlines how we collect, use, and protect your data when using our AI-powered fraud detection system.</p>
                <ul>
                    <li><strong>1. Data Collection:</strong> We collect transaction details, user behavior patterns, and security logs to enhance fraud detection accuracy.</li>
                    <li><strong>2. Data Usage:</strong></li>
                    <ul>
                        <li>‚úîÔ∏è Used solely for fraud prevention and security analysis.</li>
                        <li>‚úîÔ∏è Never shared with third parties without consent.</li>
                        <li>‚úîÔ∏è Stored securely with encryption protocols.</li>
                    </ul>
                    <li><strong>3. User Rights:</strong></li>
                    <ul>
                        <li>üîπ Users can request access to their data.</li>
                        <li>üîπ Users can opt out of data collection for non-essential services.</li>
                        <li>üîπ Users can request data deletion upon account closure.</li>
                    </ul>
                    <li><strong>4. Security Measures:</strong></li>
                    <ul>
                        <li>‚úÖ End-to-end encryption for all transactions.</li>
                        <li>‚úÖ AI-driven anomaly detection to prevent unauthorized access.</li>
                        <li>‚úÖ Compliance with global data protection regulations.</li>
                    </ul>
                </ul>
            </div>
            <div class="terms-conditions">
                <h3>üìú Terms & Conditions</h3>
                <p>By using our fraud detection system, you agree to the following terms:</p>
                <ul>
                    <li><strong>1. Service Usage:</strong></li>
                    <ul>
                        <li>‚úîÔ∏è AI fraud detection is designed for financial security purposes only.</li>
                        <li>‚úîÔ∏è Users must provide accurate transaction details for analysis.</li>
                        <li>‚úîÔ∏è Unauthorized attempts to manipulate the system are prohibited.</li>
                    </ul>
                    <li><strong>2. Liability Disclaimer:</strong></li>
                    <ul>
                        <li>üö´ We are not responsible for financial losses due to external cyber threats.</li>
                        <li>üö´ Fraud detection results are based on AI analysis and may require manual verification.</li>
                    </ul>
                    <li><strong>3. Account & Access:</strong></li>
                    <ul>
                        <li>üîπ Users must maintain secure login credentials.</li>
                        <li>üîπ Suspicious activity may result in temporary account suspension.</li>
                    </ul>
                    <li><strong>4. Updates & Modifications:</strong></li>
                    <ul>
                        <li>üìå We reserve the right to update policies to enhance security measures.</li>
                        <li>üìå Users will be notified of major changes via email or platform alerts.</li>
                    </ul>
                </ul>
            </div>
        </section>
        <div id="theme-toggle">
            <button id="toggle-dark-mode">Toggle Dark Mode</button>
        </div>
    </main>
    <footer>
        <p>&copy; Fraud Shield - Fraud Detection. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="scripts/app.js"></script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            // Fade in logo
            document.querySelector('.logo').classList.add('fade-in');
            // Fade in nav links with staggered delay
            document.querySelectorAll('.nav-links li').forEach((li, idx) => {
                setTimeout(() => {
                    li.classList.add('fade-in');
                }, 200 + idx * 120);
            });
        });

        // 24-Hour Fraud Detection Trends (Line Chart)
        const fraudTrendsCtx = document.getElementById('fraudTrendsChart').getContext('2d');
        const fraudTrendsChart = new Chart(fraudTrendsCtx, {
            type: 'line',
            data: {
                labels: ['00:00','04:00','08:00','12:00','16:00','20:00'],
                datasets: [{
                    label: 'Fraud Cases',
                    data: [40, 35, 70, 110, 130, 80],
                    borderColor: '#36a2eb',
                    backgroundColor: 'rgba(54,162,235,0.1)',
                    tension: 0.4,
                    fill: true,
                    pointRadius: 4,
                    pointBackgroundColor: '#36a2eb'
                }]
            },
            options: {
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true } }
            }
        });

        // Fraud Distribution (Doughnut Chart)
        const fraudDistributionCtx = document.getElementById('fraudDistributionChart').getContext('2d');
        const fraudDistributionChart = new Chart(fraudDistributionCtx, {
            type: 'doughnut',
            data: {
                labels: ['Card Testing', 'Account Takeover', 'Synthetic Identity', 'Stolen Cards'],
                datasets: [{
                    data: [35, 28, 20, 17],
                    backgroundColor: ['#e74c3c','#f1c40f','#8e44ad','#2980b9'],
                    borderWidth: 2
                }]
            },
            options: {
                plugins: { legend: { position: 'bottom' } }
            }
        });

        // AI Risk Gauge (using a doughnut chart as a gauge)
        const riskGaugeCtx = document.getElementById('riskGaugeChart').getContext('2d');
        let riskScore = Math.floor(Math.random() * 101); // 0-100

        const riskGaugeChart = new Chart(riskGaugeCtx, {
            type: 'doughnut',
            data: {
                labels: ['Risk',''],
                datasets: [{
                    data: [riskScore, 100-riskScore],
                    backgroundColor: [
                        riskScore < 40 ? '#27ae60' : riskScore < 70 ? '#f1c40f' : '#e67e22',
                        '#232c3b'
                    ],
                    borderWidth: 0,
                    circumference: 180,
                    rotation: 270
                }]
            },
            options: {
                cutout: '75%',
                plugins: {
                    legend: { display: false },
                    tooltip: { enabled: false }
                }
            }
        });

        function updateRiskGauge() {
            riskScore = Math.floor(Math.random() * 101);
            riskGaugeChart.data.datasets[0].data[0] = riskScore;
            riskGaugeChart.data.datasets[0].data[1] = 100 - riskScore;
            riskGaugeChart.data.datasets[0].backgroundColor[0] =
                riskScore < 40 ? '#27ae60' : riskScore < 70 ? '#f1c40f' : '#e67e22';
            riskGaugeChart.update();

            // Update label
            const riskLabel = riskScore < 40 ? 'Low' : riskScore < 70 ? 'Medium' : 'High';
            document.getElementById('riskLevelLabel').innerText = `Risk: ${riskLabel} (${riskScore})`;
        }
        setInterval(updateRiskGauge, 5000); // Update every 5 seconds
        updateRiskGauge(); // Initial update

        // Example locations for transactions
        const locations = [
            "New York, USA", "London, UK", "Tokyo, Japan", "Berlin, Germany",
            "Sydney, Australia", "Paris, France", "Toronto, Canada", "Dubai, UAE"
        ];

        // Store the last used card number and its assigned location
        let cardLocationMap = {};

        function getConsistentLocation(cardNumber) {
            if (cardLocationMap[cardNumber]) {
                return cardLocationMap[cardNumber];
            } else {
                const location = getRandom(locations);
                cardLocationMap[cardNumber] = location;
                return location;
            }
        }

        // Helper to get a random item from an array
        function getRandom(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        // Helper to generate a random time, with a chance for midnight
        function getRandomTime() {
            // 20% chance for a midnight time (00:00 - 05:00)
            if (Math.random() < 0.2) {
                const hour = String(Math.floor(Math.random() * 6)).padStart(2, '0');
                const min = String(Math.floor(Math.random() * 60)).padStart(2, '0');
                return `${hour}:${min}`;
            }
            // Otherwise, random daytime
            const hour = String(Math.floor(Math.random() * 24)).padStart(2, '0');
            const min = String(Math.floor(Math.random() * 60)).padStart(2, '0');
            return `${hour}:${min}`;
        }

        // Helper to generate a random confidence rate (80-99%)
        function getRandomConfidence() {
            return (80 + Math.random() * 19).toFixed(1);
        }

        // Helper to generate a random assumption/perspective
        function getRandomAssumption(risk, time, location) {
            const assumptions = [
                "Transaction pattern matches previous fraud cases.",
                "Unusual location for this cardholder.",
                "High transaction velocity detected.",
                "Device fingerprint does not match previous records.",
                "Transaction at an odd hour increases risk.",
                "Large amount compared to typical spending.",
                "International transaction flagged for review.",
                "Behavioral anomaly detected."
            ];
            let result = [];
            if (risk === "High" && time < "06:00") result.push("Transaction at midnight is highly suspicious.");
            if (risk === "High" && location.includes("Dubai")) result.push("High-value transaction in Dubai flagged.");
            result.push(getRandom(assumptions));
            return result.join(" ");
        }

        // Similar Transactions Table
        const transactions = [
            { merchant: 'UnknownTech Store', amount: '$120.00', risk: 'High' },
            { merchant: 'Coffee Shop', amount: '$4.50', risk: 'Low' },
            { merchant: 'Gas Station', amount: '$45.00', risk: 'Medium' },
            { merchant: 'International Transfer', amount: '$900.00', risk: 'High' },
            { merchant: 'Online Subscription', amount: '$12.99', risk: 'Low' },
            { merchant: 'Electronics Store', amount: '$350.00', risk: 'Medium' },
            { merchant: 'Travel Booking', amount: '$700.00', risk: 'High' },
            { merchant: 'Grocery Store', amount: '$60.00', risk: 'Low' },
            { merchant: 'Luxury Watch Shop', amount: '$2,500.00', risk: 'High' },
            { merchant: 'Fast Food', amount: '$8.99', risk: 'Low' },
            { merchant: 'Mobile App Store', amount: '$3.99', risk: 'Low' },
            { merchant: 'Crypto Exchange', amount: '$1,200.00', risk: 'High' },
            { merchant: 'Bookstore', amount: '$25.00', risk: 'Medium' },
            { merchant: 'Ride Share', amount: '$18.50', risk: 'Medium' }
        ];

        const riskColors = { Low: '#27ae60', Medium: '#f1c40f', High: '#e74c3c' };
        const transactionsList = document.getElementById('transactions-list');
        transactions.forEach((tx, idx) => {
            // Generate random time, location, confidence, and assumption
            const time = getRandomTime();
            const location = getRandom(locations);
            const confidence = getRandomConfidence();
            const assumption = getRandomAssumption(tx.risk, time, location);

            const tr = document.createElement('tr');
            tr.innerHTML = `
                <td>${tx.merchant}<br><small style="color:#aaa;">${location}</small></td>
                <td>${tx.amount}</td>
                <td>${time}</td>
                <td>
                    <span style="color:${riskColors[tx.risk]};font-weight:bold;">${tx.risk}</span>
                    <br><small style="color:#888;">Confidence: ${confidence}%</small>
                </td>
                <td>
                    ${tx.risk === 'Low' ? `<button class="approve-btn" data-idx="${idx}">Approve</button>` : ''}
                    ${tx.risk === 'Medium' ? `<button class="approve-btn" data-idx="${idx}">Approve</button> <button class="block-btn" data-idx="${idx}">Block</button>` : ''}
                    ${tx.risk === 'High' ? `<button class="block-btn" data-idx="${idx}">Block</button> <button class="approve-btn" data-idx="${idx}">Request Approval</button>` : ''}
                    <br><small style="color:#3498db;">${assumption}</small>
                </td>
            `;
            transactionsList.appendChild(tr);
        });

        // Make Approve and Block buttons functional
        transactionsList.addEventListener('click', function(e) {
            if (e.target.classList.contains('approve-btn')) {
                e.target.textContent = 'Approved';
                e.target.style.background = '#2ecc71';
                e.target.style.color = '#fff';
                e.target.disabled = true;
                if (e.target.previousElementSibling && e.target.previousElementSibling.classList.contains('block-btn')) {
                    e.target.previousElementSibling.disabled = true;
                }
                if (e.target.nextElementSibling && e.target.nextElementSibling.classList.contains('block-btn')) {
                    e.target.nextElementSibling.disabled = true;
                }
            }
            if (e.target.classList.contains('block-btn')) {
                e.target.textContent = 'Blocked';
                e.target.style.background = '#c0392b';
                e.target.style.color = '#fff';
                e.target.disabled = true;
                if (e.target.previousElementSibling && e.target.previousElementSibling.classList.contains('approve-btn')) {
                    e.target.previousElementSibling.disabled = true;
                }
                if (e.target.nextElementSibling && e.target.nextElementSibling.classList.contains('approve-btn')) {
                    e.target.nextElementSibling.disabled = true;
                }
            }
        });

        document.getElementById('transaction-form').addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form values
            const cardNumber = document.getElementById('card-number').value;
            const amount = document.getElementById('amount').value;
            const merchant = document.getElementById('merchant').value;
            const expiry = document.getElementById('expiry-date').value;

            // Generate risk score based on amount
            let riskScore = Math.min(100, Math.max(0, 100 - amount / 10));
            riskScore = Math.floor(Math.random() * 101); // Randomize for demo

            // Generate random risk, time, location, confidence, and assumption
            const risks = ['Low', 'Medium', 'High'];
            const risk = getRandom(risks);
            const time = getRandomTime();
            const location = getConsistentLocation(cardNumber);
            const confidence = getRandomConfidence();
            const assumption = getRandomAssumption(risk, time, location);

            // Choose color for risk
            const riskColors = { Low: '#27ae60', Medium: '#f1c40f', High: '#e67e22' };

            // Display result
            document.getElementById('result').innerHTML = `
                <div style="padding:1em;">
                    <strong>Prediction:</strong>
                    <span style="color:${riskColors[risk]};font-weight:bold;">${risk} Risk</span><br>
                    <strong>Confidence:</strong> ${confidence}%<br>
                    <strong>Transaction Time:</strong> ${time}<br>
                    <strong>Location:</strong> ${location}<br>
                    <strong>Assumption:</strong> <span style="color:#3498db;">${assumption}</span>
                </div>
            `;
        });
    </script>
</body>
</html>
